---
title: 微信小程序开发
date: 2017-11-29 14:50:13
tags: 微信小程序开发
categories: 编程

---
  1. 通过公众号与小程序之间的关联，可以实现公众号与小程序之间的跳转，不支持小程序和APP直接的跳转；小程序基于H5开发，云端应用，无需下载，一次开发多终端适配，
  2. 入口，扫码，搜索，分享，才可以进入，进入下载无WiFi费流量，不允许主动给用户发送广告
  3. 小程序与H5的区别
      a. JavaScript的限制
      i. 通过传入字符转来执行代码的能力被禁用了，具体禁用掉的原生功能有：new Function eval Cenerator
      ii. H5是运行在浏览器中，但是小程序并非运行在浏览器中，因此与浏览器BOM相关的API都没有，例如：document，window，而且小程序没有cookie
      b. 小程序开发组在登录（避免重定向问题）、存储（对每个小程序的限制是5M、支持同步和异步）和支付方面（微信支付路径不受限制）做了更好的改进
      c. 小程序开发组比HTML5开发不方便的地方有明显的两点：
      i. 每个页面都需要手动在配置文件（app.json）中进行注册，如果没有注册，是不执行该页面的
      ii. 打开页面有5个限制，在开发时需要注意控制开发的页面数量
      iii. 微信小程序是一种介于原生APP和WebAPP的混合体，相对原生APP来说，小程序更加轻量，更加实时，跨平台；相对webAPP来说，小程序资源离线，体验流畅
  4. 文件类型
      a. index.js ------ index.js
      b. index.html ------ index.wxml
      c. index.css ------ index.wxss
  5. 小程序目录文件结构：其中app.js和app.json是必须的，app.json不可添加任何注释。project.config.json 是项目配置文件
  6. 文件用途
	<div align=center>
		![](http://p040q6o73.bkt.clouddn.com/image/boke/weixinxiaochengxu/weixin-1.png)
	</div>
	  a. .js .json 文件是必须的，不存在程序不正常运行
      b. pages（页面）
      i. 页面名称必须和文件名称一样
      ii. logs.json 必须包含{} 即便没有内容 否则会报错
      c. utils（公共资源）
      i. app.js 入口文件 可以声明全集变量 监控周期函数
      ii. app.json 注册页面  不注册不可以使用、设置页面窗体颜色
     1. 窗体颜色只有黑白两种颜色
     <div align=center>
		![](http://p040q6o73.bkt.clouddn.com/image/boke/weixinxiaochengxu/weixin-2.png)
	</div>
      iii. app.wxss配置全局样式（单独页面的样式会把全局的层叠掉）
      
  7. 新建页面
	<div align=center>
		![](http://p040q6o73.bkt.clouddn.com/image/boke/weixinxiaochengxu/weixin-3.png)
	</div>
  	  a. 点击文件新建（推荐）
      b. app.json快速新建
      c. pages：按顺序显示
  8. MINA框架
  9. 小程序配置
      a. 全局配置：微信小程序的全局配置保存在app.json文件中、开发者通过使用app.json来配置页面文件（pages）的路径，窗口（Windows）表现、设定网络超时时间值（network Timeout）以及配置多个切换页（tarBar）等。
      i. app.json配置项列表
	<div align=center>
		![](http://p040q6o73.bkt.clouddn.com/image/boke/weixinxiaochengxu/weixin-4.png)
	</div>
      ii. pages：配置项
      1. 数组的第一项用于设定小程序的初始页
      2. 小程序新增/减少页面都需要对pages数组进行修改
      3. 文件不需要写文件后缀，小程序框架会自动去寻找路径
      iii. window配置项：状态栏，导航栏，标题，窗口等对象的颜色、背景色、内容属性，可配置对象参数如下：
	<div align=center>
		![](http://p040q6o73.bkt.clouddn.com/image/boke/weixinxiaochengxu/weixin-5.png)
	</div>
      iv. tabBar底部导航
	  V. icon 图片推荐（81px） 可以去阿里图标库下载 [地址](http://www.iconfont.cn/home/index)
      1. tabBar的list是一个数组对象 至少包含2个对象最多包含5个，
      2. position在顶部的时候 icon图标就消失，不起作用，默认在底部
	<div align=center>
		![](http://p040q6o73.bkt.clouddn.com/image/boke/weixinxiaochengxu/weixin-6.png)
	</div>
          3. borderStyle 设置上边框的颜色 只有white和black
       b. 页面配置：给每个页面的.json文件进行配置，但是页面职能配置窗口的表现。页面的配置比app.json全局简单的多，只是这只app.json中的window配置项的内容，页面中配置项会覆盖app.json的window中想通的配置项
  10. 小程序的逻辑层
      a. 运行环境：不是浏览器，而是微信内部环境，所以不能用document，window
      b. APP（{}） 入口文件接受的是一个对象
      c. page（）方法 接受object参数，指定页面的初始数据、生命周期函数、事件处理函数等； 每个页面有且只有一个，必须要有的
      d. onShareAppMessage（用户转发） 只有定义了此事件处理函数，右上角才会出现显示“转发”按钮，用户点击按钮的时候会调用，此事件需要return一个Object，用于自定义转发内容
      i. title 转发的标题
      ii. path 转发的路劲
      e. 修改data数据
      i. dingTab    this.setData（{name：“更改后的数据”}）
  11. CSS 布局注意
      a. height：100%  view 要写成  height：100vh 才会生效
      b. 长度单位rem ===  rpx 
